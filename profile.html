<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ToDoProfile</title>
    <link
      rel="shortcut icon"
      href="#"
      type="image/x-icon"
    />
    <script src="https://cdn.jsdelivr.net/npm/flatpickr" type="module" defer></script>
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
  </head>
    <body>
      <aside class="sidebar">
        <div class="setting">
          <span class="user-name"
            >–ó–∞—Ç—è–≥–Ω—É—Ç–∏ –ª–æ–≥—ñ–Ω –∞–±–æ –µ–ª–µ–∫—Ç—Ä–æ–Ω–Ω—É –ø–æ—à—Ç—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞</span
          >
          <button class="sidebar__icon" id="theme-icon">
            <img class="sidebar__svg" src="./img/theme.svg" alt="icon for theme of app" />
          </button>
          <button class="sidebar__icon" id="sidebar-icon">
            <img class="sidebar__svg" src="./img/hide.svg" alt="icon for hide sidebar" />
          </button>
        </div>
        <div class="task--button">
          <button class="new-task" id="new-task"> <!--–ö–Ω–æ–ø–∫–∞ –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–æ—ó —Å–ø—Ä–∞–≤–∏-->
            <img class="plus" src="./img/add.svg" alt="add new task">
            –î–æ–¥–∞—Ç–∏ —Å–ø—Ä–∞–≤—É
          </button>
        </div>
        <ul class="list-groups">
            <li id="today">–°—å–æ–≥–æ–¥–Ω—ñ</li> <!--–ù–∞–∑–≤–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ —Å–ø–∏—Å–∫—É-->
            <li id="soon">–ù–µ–≤–¥–æ–≤–∑—ñ</li> <!--–ù–∞–∑–≤–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ —Å–ø–∏—Å–∫—É-->
            <li id="achive">–ê—Ä—Ö—ñ–≤</li> <!--–ù–∞–∑–≤–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ —Å–ø–∏—Å–∫—É-->
        </ul>
        <div class="list">
          <button class="show-list" id="show-list"> <!--–í—ñ–¥–æ–±—Ä–∞–∂–∞—î –≤—Å—ñ —Å–ø–∏—Å–∫–∏ –∑–∞–≤–¥–∞–Ω—å-->
            –°–ø–∏—Å–∫–∏ –∑–∞–≤–¥–∞–Ω—å
          </button>
          <button class="show-list" id="add-list"> <!--–î–æ–¥–∞—î –Ω–æ–≤–∏–π —Å–ø–∏—Å–æ–∫-->
            –î–æ–¥–∞—Ç–∏ —Å–ø–∏—Å–æ–∫
          </button>
        </div>
        <div>
          <ul class="list-container" id="list-name">
            <li class="list-name" id="list-one"></li> <!--–í—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è –Ω–æ–≤–æ—Å—Ç–≤–æ—Ä–µ–Ω—ñ —Å–ø–∏—Å–∫–∏-->
          </ul>
        </div>
      </aside>
      <main class="main" id="main">
        <nav class="add-function">
          <ul class="display">
            <li class="display-logs"><img class="logs" src="./img/logs.svg" alt="logs"></li>
          </ul>
        </nav>
        <div class="main-content">
          <p class="page-name" id="page-name">#</p>
          <!-- //–í–∏–≤–µ—Å—Ç–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é js –Ω–∞–∑–≤—É –æ–±—Ä–∞–Ω–æ–≥–æ —Å–ø–∏—Å–∫—É -->
          <button class="main-content--btn"> <!--–ö–Ω–æ–ø–∫–∞ –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–æ—ó —Å–ø—Ä–∞–≤–∏-->
            <img class="plus-main" src="./img/add.svg" alt="add new task">–î–æ–¥–∞—Ç–∏ —Å–ø—Ä–∞–≤—É
          </button>
        </div>
        <div class="task-list"> 
          <input
            type="text"
            class="task-title"
            placeholder="–í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É –∑–∞–¥–∞—á—ñ"
            value="#"
          /> <!--–ü–æ–ª–µ –¥–ª—è —É–≤–µ–¥–µ–Ω–Ω—è –Ω–∞–∑–≤–∏ —Å–ø—Ä–∞–≤–∏ -->
          <textarea class="task-description" placeholder="–û–ø–∏—Å"></textarea>
          <div class="task-actions">
            <input type="text" id="datePicker"> <!--–î–ª—è –∫–∞–ª–µ–Ω–¥–∞—Ä—è -->
            <button class="action-button" id="openCalendar">–ö–æ–ª–∏?</button>
            <div class="task-footer">
              <button class="choose-list" id="choose-list"><span>#</span></button> <!--–ú–æ–∂–Ω–∞ –æ–±—Ä–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ –∑ —É—Å—ñ—Ö —ñ—Å–Ω—É—é—á–∏—Ö -->
              <div class="footer-buttons">
                <button class="add-button" id="add-button">–î–æ–¥–∞—Ç–∏</button> <!--–î–æ–¥–∞—Ç–∏ –∑–∞–≤–¥–∞–Ω–Ω—è -->
                <button class="cancel-button" id="cancel-button">–í—ñ–¥–º—ñ–Ω–∏—Ç–∏</button> <!--–í—ñ–¥–º—ñ–Ω–∏—Ç–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–≤–¥–∞–Ω–Ω—è -->
              </div>
            </div>
          </div>
        </div>
        <div class="full-list">
          <ul class="full-list">
            <li class="list-item"></li> <!--–ü—ñ—Å–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –∑–∞–≤–¥–∞–Ω–Ω—è –≤–æ–Ω–æ –±—É–¥–µ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏—Å—å —Ç—É—Ç -->
          </ul>
        </div>
      </main>
      <script type="module" src="js/profile-page.js"></script>
      <script>
        document.addEventListener("DOMContentLoaded", () => {
  const listContainer = document.getElementById("list-name");
  const addListButton = document.getElementById("add-list");

  // –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å–ø–∏—Å–∫—ñ–≤ —ñ–∑ localStorage
  function loadLists() {
    const savedLists = JSON.parse(localStorage.getItem("taskLists")) || [];
    listContainer.innerHTML = ""; // –û—á–∏—Å—Ç–∏—Ç–∏ –ø–µ—Ä–µ–¥ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è–º

    savedLists.forEach(listName => {
      createListElement(listName);
    });
  }

  // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∞ —Å–ø–∏—Å–∫—É
  function createListElement(name) {
    const listItem = document.createElement("li");
    listItem.classList.add("list-name");

    const span = document.createElement("span");
    // span.classList.add("list-person")
    span.textContent = name;

    const deleteButton = document.createElement("button");
    deleteButton.innerHTML = `<img src="./img/del.svg" class="del--svg" alt="Delete" width="20" height="20">`;
    deleteButton.classList.add("delete-list");
    deleteButton.addEventListener("click", () => deleteList(name));

    listItem.appendChild(span);
    listItem.appendChild(deleteButton);
    listContainer.appendChild(listItem);
  }

  // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–æ–≥–æ —Å–ø–∏—Å–∫—É
  addListButton.addEventListener("click", () => {
    const listName = prompt("–í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É –Ω–æ–≤–æ–≥–æ —Å–ø–∏—Å–∫—É:");

    if (listName && listName.trim() !== "") {
      const savedLists = JSON.parse(localStorage.getItem("taskLists")) || [];

      if (!savedLists.includes(listName)) {
        savedLists.push(listName);
        localStorage.setItem("taskLists", JSON.stringify(savedLists));
        createListElement(listName);
      }
    }
  });

  // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è —Å–ø–∏—Å–∫—É
  function deleteList(name) {
    let savedLists = JSON.parse(localStorage.getItem("taskLists")) || [];
    savedLists = savedLists.filter(list => list !== name);
    localStorage.setItem("taskLists", JSON.stringify(savedLists));
    loadLists(); // –û–Ω–æ–≤–ª—é—î–º–æ —Å–ø–∏—Å–æ–∫
  }

  // –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Å–ø–∏—Å–∫–∏ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏
  loadLists();
});
      </script>
      <!-- <script>
     class Task {
      constructor(title, description, dueDate, completed = false) {
      this.id = Date.now();
      this.title = title;
      this.description = description;
      this.dueDate = dueDate;
      this.completed = completed;
    }
  
    toggleCompleted() {
      this.completed = !this.completed;
    }
  }

  class TaskList {
  constructor() {
    this.tasks = this.loadFromLocalStorage("tasks");
    this.archivedTasks = this.loadFromLocalStorage("archivedTasks");
    this.renderTasks();
  }

  addTask(title, description, dueDate) {
    if (!title.trim() || !description.trim() || !dueDate.trim()) return;
    
    const newTask = new Task(title, description, dueDate);
    this.tasks.push(newTask);
    this.saveToLocalStorage();
    this.renderTasks();
  }

  deleteTask(id) {
    this.tasks = this.tasks.filter(task => task.id !== id);
    this.saveToLocalStorage();
    this.renderTasks();
  }

  toggleTask(id) {
    const taskIndex = this.tasks.findIndex(task => task.id === id);
    if (taskIndex !== -1) {
      const task = this.tasks[taskIndex];
      task.toggleCompleted();

      if (task.completed) {
        this.archivedTasks.push(task);
        if (this.archivedTasks.length > 50) {
          this.archivedTasks.shift(); // –í–∏–¥–∞–ª—è—î–º–æ –Ω–∞–π—Å—Ç–∞—Ä—ñ—à–∏–π –∑–∞–ø–∏—Å, —è–∫—â–æ –±—ñ–ª—å—à–µ 50
        }
        this.tasks.splice(taskIndex, 1);
      }

      this.saveToLocalStorage();
      this.renderTasks();
    }
  }

  saveToLocalStorage() {
    localStorage.setItem("tasks", JSON.stringify(this.tasks));
    localStorage.setItem("archivedTasks", JSON.stringify(this.archivedTasks));
  }

  loadFromLocalStorage(key) {
    return JSON.parse(localStorage.getItem(key)) || [];
  }

  renderTasks() {
    const taskContainer = document.querySelector(".full-list ul");
    if (!taskContainer) return;

    taskContainer.innerHTML = "";

    this.tasks.forEach(task => {
      const taskElement = document.createElement("li");
      taskElement.classList.add("list-item");
      if (task.completed) taskElement.classList.add("completed");

      taskElement.innerHTML = `
        <div class="task-content">
          <p class="task-title">${task.title}</p>
          <p class="task-description">${task.description}</p>
          <span class="task-date">${task.dueDate}</span>
        </div>
        <div class="task-actions">
          <button class="toggle" data-id="${task.id}">‚úî</button>
          <button class="delete" data-id="${task.id}">üóë</button>
        </div>
      `;

      taskContainer.appendChild(taskElement);
    });

    document.querySelectorAll(".toggle").forEach(button => {
      button.addEventListener("click", (e) => {
        const id = Number(e.target.dataset.id);
        this.toggleTask(id);
      });
    });

    document.querySelectorAll(".delete").forEach(button => {
      button.addEventListener("click", (e) => {
        const id = Number(e.target.dataset.id);
        this.deleteTask(id);
      });
    });
  }

  showArchivedTasks() {
    if (this.archivedTasks.length === 0) {
      alert("–ê—Ä—Ö—ñ–≤ –ø–æ—Ä–æ–∂–Ω—ñ–π!");
      return;
    }

    const archivedList = this.archivedTasks.map(task => 
      `${task.title} (${task.dueDate})\n${task.description}`
    ).join("\n\n");

    alert(`–ê—Ä—Ö—ñ–≤–æ–≤–∞–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è:\n\n${archivedList}`);
  }
}

const taskList = new TaskList();

document.getElementById("add-button").addEventListener("click", () => {
  const title = document.querySelector(".task-title").value;
  const description = document.querySelector(".task-description").value;
  const dueDate = document.getElementById("datePicker").value;

  if (title && description && dueDate) {
    taskList.addTask(title, description, dueDate);
    document.querySelector(".task-title").value = "#";
    document.querySelector(".task-description").value = "";
    document.getElementById("datePicker").value = "";
  }
});

document.getElementById("cancel-button").addEventListener("click", () => {
  document.querySelector(".task-title").value = "#";
  document.querySelector(".task-description").value = "";
  document.getElementById("datePicker").value = "";
});

// –î–æ–¥–∞—î–º–æ –ø–æ–¥—ñ—é –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–ê—Ä—Ö—ñ–≤"
document.getElementById("achive").addEventListener("click", () => {
  taskList.showArchivedTasks();
});
      </script> -->
      </script>
    </body>
</html>